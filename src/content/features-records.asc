=== Records

A record is internally a named tuple. Records may map to different structures in
different languages.

A general record is defined as follows:

[source, morloc]
----
record Person = Person
    { name :: Str
    , age :: Int
    }
----

Concrete forms must have the same field names and field types. Since these must
be the same, they need not be specified. We only need to specify the name of the
concrete type:

[source, morloc]
----
record Py => Person = "dict"
record R => Person = "list"
record Cpp => Person = "person_t"
----

In R and Python, records are typically `dict` and `list` types,
respectively. These types con contain any fields of any type. In {cpp}, records
are represented as structs; these must must be defined in the C code, as shown
below.

[source, cpp]
----
struct person_t {
    std::string name;
    int age;
};
----

Functions may be defined that act on the records, as below:

[source, morloc]
----
source R from "foo.R" ("incAge" as rinc)
source Py from "foo.py" ("incAge" as pinc)
source Cpp from "foo.hpp" ("incAge" as cinc)

-- Increment the person's age
rinc :: Person -> Person
pinc :: Person -> Person
cinc :: Person -> Person
----

Records may, like all `morloc` types, be passed freely between languages. As
shown above, records may be written in braces and their type will be inferred.

The "foo.R" file contains the function:

[source, r]
----
incAge <- function(person){
    person$age <- person$age + 1
    person
}
----

No special code is needed for `person`, it is just a builtin R list. Similarly for Python:

[source, python]
----
def incAge(person):
    person["age"] += 1
    return person
----

{cpp} requires a definition of a `person_t` struct:

[source, c++]
----
struct person_t {
    std::string name;
    int age;
};

person_t incAge(person_t person){
    person.age++;
    return person;
}
----

Records may be initialized and functions called on them:

[source, morloc]
----
foo name age
    = (rinc . pinc . cinc)
      { name = name, age = age }
----

`foo`, above, initializes a `Person` record and then increments its age 3 time
in different languages.

Records may contain fields with arbitrarily complex types, but recursive types
are not currently supported.

