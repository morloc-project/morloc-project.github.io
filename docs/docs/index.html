<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="Zebulun Arendsee">
<link rel="icon" type="image/x-icon" href="./static/img/favicon.ico">
<title>Morloc Technical Manual</title>
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="./static/highlight/styles/github-light-dark.min.css">
<meta
	name="keywords"
	content="asciidoctor, template, pitch black, jet black, black, adoc, dark mode"
/>
<meta name="description" content="A jet black Asciidoctor template." />
<meta name="theme-color" content="#000000" />
<meta property="og:site_name" content="Asciidoctor Jet" />
<meta property="og:title" content="Asciidoctor Jet" />
<meta property="og:type" content="website" />
<meta property="og:description" content="A jet black Asciidoctor template." />
<meta
	property="og:url"
	content="https://harshkapadia2.github.io/asciidoctor-jet"
/>
<meta
	property="og:image"
	content="https://harshkapadia2.github.io/asciidoctor-jet/static/img/icon-512.png"
/>
<meta property="og:image:width" content="512" />
<meta property="og:image:height" content="512" />
<meta
	property="twitter:image"
	content="https://harshkapadia2.github.io/asciidoctor-jet/static/img/icon-512.png"
/>

<script defer src="static/js/script.js"></script>

<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
	href="https://fonts.googleapis.com/css2?family=PT+Mono&family=Montserrat&display=swap"
	rel="stylesheet"
/>

<link rel="stylesheet" href="static/css/style.css" />

<link rel="apple-touch-icon" href="static/img/icon-192.png" />

<link rel="manifest" href="manifest.webmanifest" />
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Morloc Technical Manual</h1>
<div class="details">
<span id="author" class="author">Zebulun Arendsee</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_what_is_morloc">1. What is <code>morloc</code>?</a></li>
<li><a href="#_why_morloc">2. Why <code>morloc</code>?</a>
<ul class="sectlevel2">
<li><a href="#_compose_functions_across_languages_under_a_common_type_system">2.1. Compose functions across languages under a common type system</a></li>
<li><a href="#_write_in_your_favorite_language_share_with_everyone">2.2. Write in your favorite language, share with everyone</a></li>
<li><a href="#_run_benchmarks_and_tests_across_languages">2.3. Run benchmarks and tests across languages</a></li>
<li><a href="#_scrap_your_applications">2.4. Scrap your applications</a></li>
<li><a href="#_scrap_your_bespoke_data_formats">2.5. Scrap your bespoke data formats</a></li>
<li><a href="#_design_universal_libraries">2.6. Design universal libraries</a></li>
<li><a href="#_want_to_be_deviant">2.7. Want to be deviant?</a></li>
</ul>
</li>
<li><a href="#_getting_started">3. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_install_the_compiler">3.1. Install the compiler</a></li>
<li><a href="#_say_hello">3.2. Say hello</a></li>
<li><a href="#_compose_functions_across_languages">3.3. Compose functions across languages</a></li>
<li><a href="#_one_term_may_have_many_definitions">3.4. One term may have many definitions</a></li>
<li><a href="#_overload_terms_with_typeclasses">3.5. Overload terms with typeclasses</a></li>
<li><a href="#_pass_types_between_languages">3.6. Pass types between languages</a></li>
<li><a href="#_a_longer_example">3.7. A longer example</a></li>
</ul>
</li>
<li><a href="#_syntax_and_features">4. Syntax and Features</a>
<ul class="sectlevel2">
<li><a href="#_basic_data_types">4.1. Basic data types</a></li>
<li><a href="#_functions">4.2. Functions</a></li>
<li><a href="#_type_signatures_and_type_functions">4.3. Type signatures and type functions</a></li>
<li><a href="#_sourcing_functions">4.4. Sourcing functions</a></li>
<li><a href="#_modules">4.5. Modules</a></li>
<li><a href="#_ad_hoc_polymorphism_overloading_and_type_classes">4.6. Ad hoc polymorphism (overloading and type classes)</a></li>
<li><a href="#_core_libraries">4.7. Core libraries</a></li>
</ul>
</li>
<li><a href="#_language_interoperability">5. Language Interoperability</a>
<ul class="sectlevel2">
<li><a href="#_type_inference">5.1. Type inference</a></li>
<li><a href="#_serialization">5.2. Serialization</a></li>
</ul>
</li>
<li><a href="#_qa">6. Q&amp;A</a>
<ul class="sectlevel2">
<li><a href="#_what_about_object_oriented_programming">6.1. What about object-oriented programming?</a></li>
</ul>
</li>
<li><a href="#_status_of_morloc">7. Status of <code>morloc</code></a></li>
<li><a href="#_contact">8. Contact</a></li>
<li><a href="#_acknowledgements">9. Acknowledgements</a></li>
<li><a href="#_references">References</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="stemblock">
<div class="content">
\[
\def\ea{\widehat{\alpha}}
\def\eb{\widehat{\beta}}
\def\eg{\widehat{\gamma}}
\def\sep{ \quad\quad}
\newcommand{\mark}[1]{\blacktriangleright_{#1}}
\newcommand{\expr}[3]{#1\ \ \vdash\ #2\ \dashv\ \ #3}
\newcommand{\packto}[2]{#1\ \approx &gt;\ #2}
\newcommand{\apply}[3]{#1 \bullet #2\ \Rightarrow {\kern -1em} \Rightarrow\ #3}
\newcommand{\subtype}[2]{#1\ :\leqq\ #2}
\newcommand{\braced}[1]{\lbrace #1 \rbrace}
\]
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_morloc"><a class="anchor" href="#_what_is_morloc"></a>1. What is <code>morloc</code>?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>morloc</code> is a strongly-typed functional programming language where functions are
imported from foreign languages and unified through a common type system. This
language is designed to serve as the foundation for a universal library of
functions. Each function in the library has one universal type and zero or more
implementations. An implementation may be either a function sourced from a
foreign language or a composition of <code>morloc</code> functions. The <code>morloc</code> compiler
takes your program, written as a composition of typed functions, and generates
an optimized program.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_morloc"><a class="anchor" href="#_why_morloc"></a>2. Why <code>morloc</code>?</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_compose_functions_across_languages_under_a_common_type_system"><a class="anchor" href="#_compose_functions_across_languages_under_a_common_type_system"></a>2.1. Compose functions across languages under a common type system</h3>
<div class="paragraph">
<p><code>morloc</code> allows functions from polyglot libraries to be composed in a simple
functional language. The focus isn’t on classic interoperability (like calling C
from Python), or serialization (like sending JSON between programs)&#8201;&#8212;&#8201;though
morloc implementations may use these under the hood. Instead, you define types,
import implementations, and compose everything together to build complex
programs. The compiler invisibly generates any required interop code.</p>
</div>
</div>
<div class="sect2">
<h3 id="_write_in_your_favorite_language_share_with_everyone"><a class="anchor" href="#_write_in_your_favorite_language_share_with_everyone"></a>2.2. Write in your favorite language, share with everyone</h3>
<div class="paragraph">
<p>Do you <strong>want</strong> to write in language X but <strong>have</strong> to write in language Y because
everyone in your team does or because your expected users do? Love C for
algorithms, R for statistics, but don’t want to write full apps in either?
<code>morloc</code> lets you mix and match, so you can use each language where it shines,
with no bindings or boilerplate.</p>
</div>
</div>
<div class="sect2">
<h3 id="_run_benchmarks_and_tests_across_languages"><a class="anchor" href="#_run_benchmarks_and_tests_across_languages"></a>2.3. Run benchmarks and tests across languages</h3>
<div class="paragraph">
<p>Tired of learning new benchmark and testing suites across all your languages? Is
it hard to benchmark similar tools wrapped in applications with varying input
formats, input validation costs, or startup overhead? In <code>morloc</code>, functions
with the same general type signature can be swapped in and out for benchmarking
and testing. The same test suites and test cases will work across all supported
languages because since inputs/output of all functions of the same type share
equivalent <code>morloc</code> binary forms, making validation and comparison easy.</p>
</div>
</div>
<div class="sect2">
<h3 id="_scrap_your_applications"><a class="anchor" href="#_scrap_your_applications"></a>2.4. Scrap your applications</h3>
<div class="paragraph">
<p>Tired of writing wrappers, CLIs, APIs, and bindings for every tool? With morloc,
just write clean functions and compositions&#8201;&#8212;&#8201;the compiler can generate the
rest.</p>
</div>
</div>
<div class="sect2">
<h3 id="_scrap_your_bespoke_data_formats"><a class="anchor" href="#_scrap_your_bespoke_data_formats"></a>2.5. Scrap your bespoke data formats</h3>
<div class="paragraph">
<p>Are you used to chaining tools with text files (think bioinformatics pipelines)?
Maybe you even thought this was "the UNIX way" and therefore a "good thing". But
after writing your hundreth GFF parser that builds gene models from
inconsistently formatted attribute fields, maybe you&#8217;ve started to have
doubts. <code>morloc</code> lets you drop the fragile formats. Instead, define clear,
unambiguous data structures and share them natively across languages</p>
</div>
</div>
<div class="sect2">
<h3 id="_design_universal_libraries"><a class="anchor" href="#_design_universal_libraries"></a>2.6. Design universal libraries</h3>
<div class="paragraph">
<p>Tired of reimplementing everything in every language? In <code>morloc</code>, we can define
functions, typeclasses, and hierarchies of types. Then build universal,
(optionally) polyglot libraries that compose across language boundaries. These
libraries may be searched by type as well as metadata (ranging from mundane
licensing info to exotic empirical models of performance and certificates of
correctness). This makes it possible to build safe, verifiable, and even
AI-assisted compositions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_want_to_be_deviant"><a class="anchor" href="#_want_to_be_deviant"></a>2.7. Want to be deviant?</h3>
<div class="paragraph">
<p>Why is Python so popular? Simple. It is easy to learn, leading to high early
adoption. After early adoption, positive feedback took over: Python teams
encourage new members to use Python, growing communities create more
high-quality libraries that attract more users. So, apart from the language&#8217;s
natural charms, its success came from social cohesive forces and ecosystem
depth. <code>morloc</code> weakens both these forces by letting teams more
easily work in polyglot settings and by sharing ecosystems and libraries across
languages.</p>
</div>
<div class="paragraph">
<p>You can write all your heavy algorithmic code in a fast language like C and your
more mundane code in Python. Write heavy-duty code in C, glue code in Python, or use
specialized languages like BUGS/JAGS for Bayesian models or Futhark for
high-performance computing. The goal: make the programming world more welcoming
to all the weird and wonderful languages out there.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a>3. Getting Started</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_install_the_compiler"><a class="anchor" href="#_install_the_compiler"></a>3.1. Install the compiler</h3>
<div class="paragraph">
<p>The easiest way to start using <code>morloc</code> is through containers. I recommend using
podman, since it doesn&#8217;t require a daemon or sudo access. But Docker,
Singularity, and other container engines are fine as well.</p>
</div>
<div class="paragraph">
<p>An image with the morloc executable and batteries included can be retrieved
from the GitHub container registry as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ podman pull ghcr.io/morloc-project/morloc/morloc-full:0.53.7</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>v0.53.7</code> may be replaced with the desired <code>morloc</code> version.</p>
</div>
<div class="paragraph">
<p>Now you can enter a shell with a full working installation of <code>morloc</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ podman run --shm-size=4g \
             -v $HOME:$HOME \
             -w $PWD \
             -e HOME=$HOME \
             -it ghcr.io/morloc-project/morloc/morloc-full:0.53.7 \
             /bin/bash</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>--shm-size=4g</code> option sets the shared memory space to 4GB. <code>morloc</code> uses
shared memory for communication between languages, but containers often limit
the shared memory space to 64MB by default.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can set up a script to run commands in a <code>morloc</code> environment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">podman run --rm \
           --shm-size=4g \
           -e HOME=$HOME \
           -v $HOME/.morloc:$HOME/.morloc \
           -v $PWD:$HOME \
           -w $HOME \
           ghcr.io/morloc-project/morloc/morloc-full:0.53.7 "$@"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Name this script <code>menv</code>, for "morloc environment", make it executable, and place
it in your PATH. The script will mount your current working directory and your
<code>morloc</code> home directory, allowing you to run commands in a morloc-compatible
environment.</p>
</div>
<div class="paragraph">
<p>You can can run commands like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ menv morloc --version      # get the current morloc version
$ menv morloc -h             # list morloc commands
$ menv morloc init -f        # setup the morloc environment
$ menv morloc install types  # install a morloc module
$ menv morloc make foo.loc   # compile a local morloc module</code></pre>
</div>
</div>
<div class="paragraph">
<p>The generated executables may not work on your system since they were compiled
inside the container, but you can run them in the container environemtn as well:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ menv ./nexus foo 1 2 3</code></pre>
</div>
</div>
<div class="paragraph">
<p>More advanced solutions with richer dependency handling will be introduced in
the future, but for now this allows easy experimentation with the language in a
safe(ish) sandbox.</p>
</div>
<div class="paragraph">
<p>The <code>menv morloc</code> or <code>menv ./nexus</code> syntax is a bit verbose, but I&#8217;ll let you
play with alternative aliases. The conventions here are still fluid. Let me know
if you find something better and or if you find bugs in this approach.</p>
</div>
</div>
<div class="sect2">
<h3 id="_say_hello"><a class="anchor" href="#_say_hello"></a>3.2. Say hello</h3>
<div class="paragraph">
<p>The inevitable "Hello World" case is implemented in <code>morloc</code> like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-morloc hljs" data-lang="morloc">module main (hello)
hello = "Hello up there"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The module named <code>main</code> exports the term <code>hello</code> which is assigned to a literal
string value.</p>
</div>
<div class="paragraph">
<p>Paste code this into a file (e.g. "hello.loc") and then it can be imported by
other <code>morloc</code> modules or directly compiled into a program where every exported
term is a subcommand.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">morloc make hello.loc</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command will produce two files: a C program, <code>nexus.c</code>, and its compiled
binary, <code>nexus</code>. The <code>nexus</code> is the command line user interface to the commands
exported from the module.</p>
</div>
<div class="paragraph">
<p>Calling <code>nexus</code> with no arguments or with the <code>-h</code> flag, will print a help
message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ ./nexus -h
The following commands are exported:
  hello
    return: Str</code></pre>
</div>
</div>
<div class="paragraph">
<p>The command is called as so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ ./nexus hello
Hello up there</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compose_functions_across_languages"><a class="anchor" href="#_compose_functions_across_languages"></a>3.3. Compose functions across languages</h3>
<div class="paragraph">
<p>In <code>morloc</code>, you can import functions from many languages and compose them under
a common type system. The syntax for importing functions from source files is as
follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">source Cpp from "foo.hpp" ("map", "sum", "snd")
source Py from "foo.py" ("map", "sum", "snd")</code></pre>
</div>
</div>
<div class="paragraph">
<p>This brings the functions <code>map</code>, <code>sum</code>, and <code>snd</code> into scope in the <code>morloc</code>
script. Each of these functions must be defined in the C++ and Python
scripts. For Python, since <code>map</code> and <code>sum</code> are builtins, only <code>snd</code> needs to be
defined. So the <code>foo.py</code> function only requires the following two lines:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">def snd(pair):
    return pair</code></pre>
</div>
</div>
<div class="paragraph">
<p>The C++ file, <code>foo.hpp</code>, may be implemented as a simple header file with generic
implementations of the three required functions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C++ hljs" data-lang="C++">#pragma once
#include &lt;vector&gt;
#include &lt;tuple&gt;

// map :: (a -&gt; b) -&gt; [a] -&gt; [b]
template &lt;typename A, typename B, typename F&gt;
std::vector&lt;B&gt; map(F f, const std::vector&lt;A&gt;&amp; xs) {
    std::vector&lt;B&gt; result;
    result.reserve(xs.size());
    for (const auto&amp; x : xs) {
        result.push_back(f(x));
    }
    return result;
}

// snd :: (a, b) -&gt; b
template &lt;typename A, typename B&gt;
B snd(const std::tuple&lt;A, B&gt;&amp; p) {
    return std::get&lt;1&gt;(p);
}

// sum :: [a] -&gt; a
template &lt;typename A&gt;
A sum(const std::vector&lt;A&gt;&amp; xs) {
    A total = A{0};
    for (const auto&amp; x : xs) {
        total += x;
    }
    return total;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that these implementations are completely independent of <code>morloc</code> --- they
have no special constraints, they operate on perfectly normal native data
structures, and their usage is not limited to the <code>morloc</code> ecosystem. The
<code>morloc</code> compiler is responsible for mapping data between the languages. But to
do this, <code>morloc</code> needs a little information about the function types. This is
provided by the general type signatures, like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">map a b :: (a -&gt; b) -&gt; [a] -&gt; [b]
snd a b :: (a, b) -&gt; b
sum :: [Real] -&gt; Real</code></pre>
</div>
</div>
<div class="paragraph">
<p>The syntax for these type signatures is inspired by Haskell, with the exception
that generic terms (<code>a</code> and <code>b</code> here) must be declared on the left. Square
brackets represent homogenous lists and parenthesized, comma-separated values
represent tuples, and arrows represent functions. In the <code>map</code> type, <code>(a &#8594; b)</code>
is a function from generic value <code>a</code> to generic value <code>b</code>;  <code>[a]</code> is the input
list of initial values; <code>[b]</code> is the output list of transformed values.</p>
</div>
<div class="paragraph">
<p>Removing the syntactic sugar for lists and tuples, the signatures may be written
as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">map a b :: (a -&gt; b) -&gt; List a -&gt; List b
snd a b :: Tuple2 a b -&gt; b
sum :: List Real -&gt; Real</code></pre>
</div>
</div>
<div class="paragraph">
<p>These signatures provide the <strong>general</strong> types of the functions. But one general
type may map to multiple <strong>native</strong>, language-specific types. So we need to
provide an explicit mapping from general to native types.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">type Cpp =&gt; List a = "std::vector&lt;$1&gt;" a
type Cpp =&gt; Tuple2 a b = "std::tuple&lt;$1,$2&gt;" a b
type Cpp =&gt; Real = "double"
type Py =&gt; List a = "list" a
type Py =&gt; Tuple2 a b = "tuple" a b
type Py =&gt; Real = "float"</code></pre>
</div>
</div>
<div class="paragraph">
<p>These type functions guide the synthesis of native types from general
types. Take the C mapping for `List a` as an example. The basic C list type
is <code>vector</code> from the standard template library. After the <code>morloc</code> typechecker
has solved for the type of the generic parameter <code>a</code>, and recursively converted
it to <code>C`, its type will be substituted for `$1`. So if `a` is inferred to be
a `Real`, it will map to the C `double</code>, and then be substituted into the list
type yielding <code>std::vector&lt;double&gt;</code>. This type will be used in the generated C++
code.</p>
</div>
<div class="paragraph">
<p>Functions can be composed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">sumSnd xs = sum (map snd xs)</code></pre>
</div>
</div>
<div class="paragraph">
<p>These <code>morloc</code> compositions will be internally rewritten in terms of the native
imported functions, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">\xs -&gt; sum (map snd xs)</code></pre>
</div>
</div>
<div class="paragraph">
<p>So in the final form, all functions in <code>morloc</code> are imported from foreign languages.</p>
</div>
<div class="paragraph">
<p><code>morloc</code> also supports partial application, eta reduction, and the dot-operator
for composition. So <code>sumSnd</code> can be simplified to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">sumSnd = sum . map snd</code></pre>
</div>
</div>
<div class="paragraph">
<p>But what code is generated from this? Remember, we imported functions in Pythong
<strong>and</strong> C++ for each of the three native functions above. This problem is
addressed in the next section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_one_term_may_have_many_definitions"><a class="anchor" href="#_one_term_may_have_many_definitions"></a>3.4. One term may have many definitions</h3>
<div class="paragraph">
<p><code>morloc</code> supports a kind of <strong>language</strong> or <strong>implementation</strong> polymorphism. Each
term may have many definitions. For example, the function <code>mean</code> has three
definitions below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">import base (sum, div, size, fold, add)
import types
source Cpp from "mean.hpp" ("mean")
mean :: [Real] -&gt; Real
mean xs = div (sum xs) (size xs)
mean xs = div (fold 0 add xs) (size xs)</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>mean</code> is sourced directly from <code>C++</code>, it is defined in terms of the <code>sum</code>
function, and it is defined more generally with <code>sum</code> written as a fold
operation. The <code>morloc</code> compiler is responsible for deciding which
implementation to use.</p>
</div>
<div class="paragraph">
<p>The equals operator in <code>morloc</code> indicates functional substitutability. When you
say a term is "equal" to something, you are giving the compiler an option for
what may be substituted for the term. The function <code>mean</code>, for example, has many
functionally equivalent definitions. They may be in different languages, or they
may be more optimal in different situations.</p>
</div>
<div class="paragraph">
<p>Now this ability to simply state that two things are the same can be abused. The
following statement is syntactically allowed in <code>morloc</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">x = 1
x = 2</code></pre>
</div>
</div>
<div class="paragraph">
<p>What is <code>x</code> after this code is run? It is 1 <strong>or</strong> 2. The latter definition does
not mask the former, it <strong>appends</strong> the former. Now in this case, the two values
are certainly not substitutable. <code>morloc</code> has a simple <strong>value checker</strong> that will
catch this type of primitive contradition. However, the value checker cannot yet
catch more nuanced errors, such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">x = div 1 (add 1 1)
x = div 2 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the type checker cannot check whithin the implementation of <code>add</code>,
so it cannot know that there is a contradiction. For this reason, some care is
needed in making these definitions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_overload_terms_with_typeclasses"><a class="anchor" href="#_overload_terms_with_typeclasses"></a>3.5. Overload terms with typeclasses</h3>
<div class="paragraph">
<p>In addition to language polymorphism, <code>morloc</code> offers more traditional ad hoc
polymorphism over types. Here typeclasses may be defined and type-specific
instances may be given. This idea is similar to typeclasses in Haskell, traits
in Rust, interfaces in Java, and concepts in <code>C++</code>.</p>
</div>
<div class="paragraph">
<p>In the example below, <code>Addable</code> and <code>Foldable</code> classes are defined and used to
create a polymorphic <code>sum</code> function.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">class Addable a where
    zero a :: a
    add a :: a -&gt; a -&gt; a

instance Addable Int where
    source Py "arithmetic.py" ("add")
    source Cpp "arithmetic.hpp" ("add")
    zero = 0

instance Addable Real where
    source Py "arithmetic.py" ("add")
    source Cpp "arithmetic.hpp" ("add")
    zero = 0.0

class Foldable f where
    foldr a b :: (a -&gt; b -&gt; b) -&gt; b -&gt; f a -&gt; b

instance Foldable List where
    source Py "foldable.py" ("foldr")
    source Cpp "foldable.hpp" ("foldr")

sum = foldr add zero</code></pre>
</div>
</div>
<div class="paragraph">
<p>The instances may import implementations for many languages.</p>
</div>
<div class="paragraph">
<p>The native functions may themselves be polymorphic, so the imported
implementations may be repeated across many instances. For example, the Python
<code>add</code> may be written as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">def add(x, y):
    return x + y</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the C++ add as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">template &lt;class A&gt;
A add(A x, A y){
    return x + y;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pass_types_between_languages"><a class="anchor" href="#_pass_types_between_languages"></a>3.6. Pass types between languages</h3>
<div class="paragraph">
<p>Up to now we have ignored the method <code>morloc</code> uses to allow communication
between languages. We&#8217;ve simply asserted that there was a "common type
system". We&#8217;ll now give a quick peak into how all this works (finer details will
be reserved for technical sections later on).</p>
</div>
<div class="paragraph">
<p>Every <code>morloc</code> general type maps unambiguously to a binary form that consists of
several fixed-width literal types, a list container, and a tuple container. The
literal types include a unit type, a boolean, signed integers (8, 16, 32, and 64
bit), unsigned integers (8, 16, 32, and 64 bit), and IEEE floats (32 and 64 bit). The
list container is represented by a 64-bit size integer and a pointer to an
unboxed vector. The tuple is represented as a set of values in contiguous
memory.</p>
</div>
<div class="paragraph">
<p>Here is an example of how the type <code>([UInt8], Bool)</code>, with the value <code>([3,4,5],True)</code>,  might be laid out in memory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">---
03 00 00 00 00 00 00 00 00 -- first tuple element, specifies list length (little-endian)
30 00 00 00 00 00 00 00 00 -- first tuple element, pointer to list
01 00 00 00 00 00 00 00 00 -- second tuple element, with 0-padding
03 04 05                   -- 8-bit values of 3, 4, and 5
---</code></pre>
</div>
</div>
<div class="paragraph">
<p>Records are represented as tuples. The names for each field are stored only in
the type schemas. <code>morloc</code> also supports tables, which are just records where
the field types correspond to the column types and where fields are all
equal-length lists. Records and tables may be defined as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">record Person = Person { name :: Str, age :: UInt8 }
table People = People { name :: Str, age :: Int }

alice = { name = "Alice", age = 27 }
students = { name = ["Alice", "Bob"], age = [27, 25] }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>morloc</code> type signatures can be translated to schema strings that may be
parsed by a foundational <code>morloc</code> C library into a type structure. Every
supported language in the <code>morloc</code> ecosystem must provide a library that wraps
this <code>morloc</code> C library and translates to/from <code>morloc</code> binary given the
<code>morloc</code> type schema.</p>
</div>
<div class="paragraph">
<p>By itself, this system allows any type that is comprised entirely of literals,
lists, and tuples to be translated between languages. But what about types that
do not break down cleanly into these forms? For example, consider the
parameterized <code>Map k v</code> type that represents a collection with keys of generic
type <code>k</code> and values of generic type <code>v</code>. This type may have many
representations, including a list of pairs, a pair of columns, a binary tree,
and a hashmap. In order for <code>morloc</code> to know how to convert all <code>Map</code> types in
all languages to one form, it must know how to express <code>Map</code> type in terms of
more primitive types. The user can provide this information by defining
instances of the <code>Packable</code> typeclass for <code>Map</code>. This typeclass defines two
functions, <code>pack</code> and <code>unpack</code>, that construct and deconstruct a complex type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">class Packable a b where
    pack a b :: a -&gt; b
    unpack a b :: b -&gt; a</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Map</code> type for Python and C++ may be defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">type Py =&gt; Map key val = "dict" key val
type Cpp =&gt; Map key val = "std::map&lt;$1,$2&gt;" key val
instance Packable ([a],[b]) (Map a b) where
    source Cpp from "map-packing.hpp" ("pack", "unpack")
    source Py from "map-packing.py" ("pack", "unpack")</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>morloc</code> user never needs to directly apply the <code>pack</code> and <code>unpack</code>
functions. Rather, these are used by the compiler within the generated code. The
compiler constructs a serialization tree from the general type and from this
trees generates the native code needed to (un)pack types recursively until only
primitive types remain. These may then be directly translated to <code>morloc</code> binary
using the language-specific binding libraries.</p>
</div>
<div class="paragraph">
<p>In some cases, the native type may not be as generic as the general type. Or you
may want to add specialized (un)packers. In such cases, you can define more
specialized instances of <code>Packable</code>. For example, if the <code>R</code> <code>Map</code> type is
defined as an <code>R</code> list, then keys can only be strings. Any other type should
raise an error. So we can write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">type R =&gt; Map key val = "list" key val
instance Packable ([Str],[b]) (Map Str b) where
source R from "map-packing.R" ("pack", "unpack")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now whenever the key generic type of <code>Map</code> is inferred to be anything other than
a string, all R implementations will be pruned.</p>
</div>
</div>
<div class="sect2">
<h3 id="_a_longer_example"><a class="anchor" href="#_a_longer_example"></a>3.7. A longer example</h3>
<div class="paragraph">
<p>Here is an example showing a parallel map function written in Python that calls C++ functions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">module m (sumOfSums)

import types (List, Real)

source Py from "foo.py" ("pmap")
source Cpp from "foo.hpp" ("sum")

pmap a b :: (a -&gt; b) -&gt; [a] -&gt; [b]
sum :: [Real] -&gt; Real

sumOfSums = sum . pmap sum</code></pre>
</div>
</div>
<div class="paragraph">
<p>This <code>morloc</code> script exports a function that sums a list of lists of real
numbers. The sum function is implemented in <code>C++</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C++ hljs" data-lang="C++">#pragma one
#include &lt;vector&gt;

double sum(const std::vector&lt;double&gt;&amp; vec) {
    double sum = 0.0;
    for (double value : vec) {
        sum += value;
    }
    return sum;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The parallel <code>pmap</code> function is written in Python:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">import multiprocessing as mp

def pmap(f, xs):
    with mp.Pool() as pool:
        results = pool.map(f, xs)
    return results</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>morloc</code> the inner summation jobs will be run in parallel. The <code>pmap</code> function
has the same signature as the non-parallel <code>map</code> function, so can serve as a
drop-in replacement.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_syntax_and_features"><a class="anchor" href="#_syntax_and_features"></a>4. Syntax and Features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_basic_data_types"><a class="anchor" href="#_basic_data_types"></a>4.1. Basic data types</h3>
<div class="paragraph">
<p>Here we&#8217;ll cover the basic <code>morloc</code> data types that directly map to <code>morloc</code>
binary. For these types, there are fairly direct representations in most
languages. The basic types are listed below:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 16.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Domain</th>
<th class="tableblock halign-left valign-top">Schema</th>
<th class="tableblock halign-left valign-top">Width (bytes)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>True</code> | <code>False</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">b</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UInt8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([0,2^{8})\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">u1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UInt16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([0,2^{16})\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">u2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UInt32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([0,2^{32})\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">u4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UInt64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([0,2^{64})\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">u8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Int8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([-2^{7},2^{7})\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Int16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([-2^{15},2^{15})\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Int32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([-2^{31},2^{31})\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Int64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([-2^{63},2^{63})\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Float32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IEEE float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">f4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Float64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IEEE double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">f8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">het lists</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a{x}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(16 + n \Vert a \Vert \)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tuple2 x1 x2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2-ples</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">t2{x1}{x2}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(\Vert a \Vert + \Vert b \Vert\)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TupleX \(\ t_i\ ...\ t_k\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">k-ples</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(tkt_1\ ...\ t_k\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(\sum_i^k \Vert t_i \Vert\)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(\{ f_1 :: t_1,\ ... \ , f_k :: t_k \}\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">records</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(mk \Vert f_1 \Vert f_1 t_1\ ...\ \Vert f_k \Vert f_k t_k \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(\sum_i^k \Vert t_i \Vert\)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All basic types may be written to a schema that is used internally to direct
conversions between <code>morloc</code> binary and native basic types. The schema values
are shown in the table above. For example, the type <code>[(Bool, [Int8])]</code> would
have the schema <code>at2bai1</code>. You will not usually have to worry about these
schemas, since they are mostly used internally. They are worth knowing, though,
since they appear in low-level tests, generated source code, and binary data
packets.</p>
</div>
<div class="paragraph">
<p>A <code>record</code> is a named, heterogenous list such as a <code>struct</code> in C, a <code>dict</code> in
Python, or a <code>list</code> in R. The type of the record exactly describes the data
stored in the record (in contrast to parameterized types like <code>[a]</code> or <code>Map a
b</code>). The are represented in <code>morloc</code> binary as tuples, the keys are only stored
in the schemas.</p>
</div>
<div class="paragraph">
<p>A <code>table</code> is like a record where field types represent the column types. But
<code>table</code> is not just syntactic sugar for a record of lists, the <code>table</code>
annotation is passed with the record through the compiler all the way to the
translator, where the language-specific serialization functions may have special
handling for tables.</p>
</div>
<div class="paragraph">
<p>Both are defined in similar ways.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-morloc hljs" data-lang="morloc">record (PersonRec a) = PersonRec {name :: Str, age :: Int}
record Cpp =&gt; PersonRec a = "MyObj"

table (PersonTbl a) = PersonObj {name :: Str, age :: Int}
table R =&gt; PersonTbl a = "data.frame"
table Cpp =&gt; PersonTbl a = "struct"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_functions"><a class="anchor" href="#_functions"></a>4.2. Functions</h3>
<div class="paragraph">
<p>Function definition follows Haskell syntax.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-morloc hljs" data-lang="morloc">foo x = g (f x)</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>morloc</code> supports the <code>.</code> operator for composition, so we can re-write <code>foo</code> as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-morloc hljs" data-lang="morloc">foo = g . f</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>morloc</code> supports partial application of arguments.</p>
</div>
<div class="paragraph">
<p>For example, to multiply every element in a list by 2, we can write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-morloc hljs" data-lang="morloc">multiplyByTwo = map (mul 2.0)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_type_signatures_and_type_functions"><a class="anchor" href="#_type_signatures_and_type_functions"></a>4.3. Type signatures and type functions</h3>
<div class="paragraph">
<p>General type declarations also follow Haskell syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-morloc hljs" data-lang="morloc">take a :: Int -&gt; List a -&gt; List a</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>a</code> is a generic type variable. <code>morloc</code> supports <code>[a]</code> as sugar for <code>List a</code>.</p>
</div>
<div class="paragraph">
<p>The general types may be translated to concrete types by fully evaluating them
with a set of language-specific type functions. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-morloc hljs" data-lang="morloc">type Cpp =&gt; Int = "int"
type Py =&gt; Int = "int"

type Cpp =&gt; List a = "std::vector&lt;$1&gt;" a
type Py =&gt; List a = "list" a</code></pre>
</div>
</div>
<div class="paragraph">
<p>Language-specific types are always quoted since they may contain syntax that is
illegal in the <code>morloc</code> language.</p>
</div>
<div class="paragraph">
<p>Type functions may also map between general types.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-morloc hljs" data-lang="morloc">type (Pairlist a b) = [(a,b)]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Why do I call them type functions, rather than just aliases? There is a lot more
that can be done with these functions that I am just beginning to explore.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sourcing_functions"><a class="anchor" href="#_sourcing_functions"></a>4.4. Sourcing functions</h3>
<div class="paragraph">
<p>Sourcing a function from a foreign language is done as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-haskell hljs" data-lang="haskell">source Cpp from "foo.h" ("mlc_foo" as foo)

foo :: A -&gt; B</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we state that we are importing the function <code>mlc_foo</code> from the <code>C++</code> source
file <code>foo.h</code> and calling it <code>foo</code>. We then give it a general type signature.</p>
</div>
<div class="paragraph">
<p>Currently <code>morloc</code> treats language-specific functions as black boxes. The
compiler does not parse the <code>C++</code> code to insure the type the programmer wrote
is correct. Checking a <code>morloc</code> general type for a function against the source
code may often be possible with conventional static analysis. LLMs are also
quite effective at both inferring <code>morloc</code> types from source code and checking
types against source code.</p>
</div>
<div class="paragraph">
<p>For statically typed languages like <code>C++</code>, incorrectly typed functions will
usually be caught by the foreign language compiler.</p>
</div>
</div>
<div class="sect2">
<h3 id="_modules"><a class="anchor" href="#_modules"></a>4.5. Modules</h3>
<div class="paragraph">
<p>A module includes all the code defined under the <code>import &lt;module_name&gt;</code>
statement. It can be imported with the <code>import</code> command.</p>
</div>
<div class="paragraph">
<p>The following module defines the constant <code>x</code> and exports it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-morloc hljs" data-lang="morloc">module foo (x)
x = 42</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another module can import <code>Foo</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">import Foo (x)

...</code></pre>
</div>
</div>
<div class="paragraph">
<p>A term may be imported from multiple modules. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-morloc hljs" data-lang="morloc">module main (add)
import cppbase (add)
import pybase (add)
import rbase (add)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This module imports that <code>C++</code>, Python, and R <code>add</code> functions and exports all
of them. Modules that import <code>add</code> will import three different versions of the
function. The compiler will choose which to use.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ad_hoc_polymorphism_overloading_and_type_classes"><a class="anchor" href="#_ad_hoc_polymorphism_overloading_and_type_classes"></a>4.6. Ad hoc polymorphism (overloading and type classes)</h3>
<div class="paragraph">
<p><code>morloc</code> supports ad hoc polymorphism, where instances of a function may be
defined for multiple types.</p>
</div>
<div class="paragraph">
<p>Here is an example of a simple type classe, <code>Sizeable</code>, which represents objects
that have be mapped to an integer that conveys the notion of size:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-morloc hljs" data-lang="morloc">module size (add)

class Sizeable a where
  size a :: a -&gt; Int</code></pre>
</div>
</div>
<div class="paragraph">
<p>Instances of <code>Sizeable</code> may be defined in this module or in modules that import
this module. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-morloc hljs" data-lang="morloc">module foo *

type Cpp =&gt; List a = "std::vector&lt;$1&gt;" a
type Py =&gt; List a = "list" a

type Cpp =&gt; Str = "std::string"
type Py =&gt; Str = "str"

instance Sizeable [a] where
  source Cpp "foo.hpp" ("size" as size)
  source Py ("len" as size)

instance Sizeable Str where
  source Cpp "foo.hpp" ("size" as size)
  source Py ("len" as size)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where in <code>C`, the generic function `size` returns length for any `C</code> size
with a <code>size</code> method. For Python, the builtin <code>len</code> can be directly used.</p>
</div>
<div class="paragraph">
<p><code>morloc</code> also supports multiple parameter typeclasses, such as in the <code>Packable</code>
typeclass below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-morloc hljs" data-lang="morloc">class Packable a b where
  pack a b :: a -&gt; b
  unpack a b :: b -&gt; a</code></pre>
</div>
</div>
<div class="paragraph">
<p>This specific typeclass is special in the <code>morloc</code> ecosystem since it handles
the simplification of complex types before serialization. Instances may overlap
and the most specific one will be selected. <code>Packable</code> may have instances such
as the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-morloc hljs" data-lang="morloc">instance Packable [a] (Queue a) where
  ...

instance Packable [a] (Set a) where
  ...

instance Packable [(a,b)] (Map a b) where
  ...

instance Packable [(Int,b)] (Map Int b) where
  ...</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_core_libraries"><a class="anchor" href="#_core_libraries"></a>4.7. Core libraries</h3>
<div class="paragraph">
<p>Each supported language has a base library that roughly corresponds to the
Haskell prelude. They have functions for mapping over lists, working with
strings, etc. They also contain standard type aliases for each language. For
example, <code>type Cpp &#8658; Int = "std::string"</code>.</p>
</div>
<div class="paragraph">
<p>The root of the current library is the <code>conventions</code> module that defines the
core type classes and the type signatures for the core functions. The
<code>conventions</code> library does not, however, load any foreign source code, so it is
entirely language agnostic.</p>
</div>
<div class="paragraph">
<p>Next each language has their own base module&#8201;&#8212;&#8201;such as <code>pybase</code>, <code>rbase</code>, and
<code>cppbase</code>&#8201;&#8212;&#8201;that import <code>conventions</code> and include the implementations for all
(or some) of the defined functions and typeclasses.</p>
</div>
<div class="paragraph">
<p>Finally, a <code>base</code> module imports all of the language-specific bases. Currently,
there are only three supported languages, so importing all their base modules is
not impractical. In the future, more selective approaches may be used.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_language_interoperability"><a class="anchor" href="#_language_interoperability"></a>5. Language Interoperability</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_type_inference"><a class="anchor" href="#_type_inference"></a>5.1. Type inference</h3>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect2">
<h3 id="_serialization"><a class="anchor" href="#_serialization"></a>5.2. Serialization</h3>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_qa"><a class="anchor" href="#_qa"></a>6. Q&amp;A</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_what_about_object_oriented_programming"><a class="anchor" href="#_what_about_object_oriented_programming"></a>6.1. What about object-oriented programming?</h3>
<div class="paragraph">
<p>An "object" is a somewhat loaded term in the programming world. As far as
<code>morloc</code> is concerned, an object is a thing that contains data and possibly
other unknown stuff, such as hidden fields and methods. All types in <code>morloc</code>
have must forms that are transferable between languages. Methods do not easily
transfer; at least they cannot be written to <code>morloc</code> binary. However, it is
possible to convey class-like APIs through typeclasses. Hidden fields are more
challenging since, by design, they are not accessible. So objects cannot
generally be directly represented in the <code>morloc</code> ecosystem.</p>
</div>
<div class="paragraph">
<p>Objects that have a clear "plain old data" representation can be handled by
<code>morloc</code>. These objects, and their component types, must have no vital hidden
data, no vital state, and no required methods. Examples of these are all the
basic Python types (<code>int</code>, <code>float</code>, <code>list</code>, <code>dict</code>, etc) and many C++ types such
as the standard vector and tuple types. When these objects are passed between
languages, they are reduced to their pure data.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_status_of_morloc"><a class="anchor" href="#_status_of_morloc"></a>7. Status of <code>morloc</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>morloc</code> is still a young language with many sharp edges. This may make
development with <code>morloc</code> challenging, but it also means that you, as an early
adopter, have a chance to make major contributions to the language.</p>
</div>
<div class="paragraph">
<p>"How can I help?"</p>
</div>
<div class="paragraph">
<p>Thanks for asking! Check out the discord channel (<a href="https://discord.gg/dyhKd9sJfF" class="bare">https://discord.gg/dyhKd9sJfF</a>)
for updates on specific current goals. But in general, just play around with the
language and try to make things. And don&#8217;t give up. If you can&#8217;t figure out how
to implement something, if you find a bug, if you want a feature, if
documentation is sparse or error messages are confusing, please reach out to me
or the folks on discord.</p>
</div>
<div class="paragraph">
<p>I have grand dreams for this language, but I can&#8217;t do it without the help of the
community.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contact"><a class="anchor" href="#_contact"></a>8. Contact</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is a young project and any brave early users are highly valued. Feel free
to contact me for any reason!</p>
</div>
<div class="ulist">
<ul>
<li>
<p>email: <a href="mailto:zbwrnz@gmail.com">zbwrnz@gmail.com</a></p>
</li>
<li>
<p>discord: <a href="https://discord.gg/dyhKd9sJfF" class="bare">https://discord.gg/dyhKd9sJfF</a>.</p>
</li>
<li>
<p>X: <a href="https://x.com/morlocproject" class="bare">https://x.com/morlocproject</a></p>
</li>
<li>
<p>BlueSky: <a href="https://bsky.app/profile/morloc-project.bsky.social" class="bare">https://bsky.app/profile/morloc-project.bsky.social</a></p>
</li>
<li>
<p>github: <a href="https://github.com/morloc-project/morloc" class="bare">https://github.com/morloc-project/morloc</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements"><a class="anchor" href="#_acknowledgements"></a>9. Acknowledgements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This documentation page was built with Asciidocs&#8201;&#8212;&#8201;the best markdown language ever&#8201;&#8212;&#8201;and the <a href="https://harshkapadia2.github.io/asciidoctor-jet/">asciidoctor-jet</a> template made by Harsh Kapadia.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="pwa-install-div hidden">
	<div id="pwa-install-text">Ready for offline use!</div>
	<button id="pwa-install-btn">Install</button>
	<button id="pwa-install-dismiss" aria-label="Dismiss PWA install prompt">
		<img loading="lazy" src="static/img/clear_cross.svg" alt="X">
	</button>
</div>

<button class="btn hidden back-to-top-btn" aria-label="Scroll to top"><img loading="lazy" src="static/img/up-arrow.svg" alt="Top"></button>
</div>
</div>
</div>
<script src="./static/highlight/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
<div id="footer">
	Created using&nbsp;
	<a
		href="https://harshkapadia2.github.io/asciidoctor-jet"
		target="_blank"
		rel="noreferrer"
		><i>Asciidoctor Jet</i></a
	>.
</div>
</body>
</html>